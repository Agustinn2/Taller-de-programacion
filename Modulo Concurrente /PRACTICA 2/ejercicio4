programa ejercicio4
procesos
  proceso limpiarFloresYPapeles(ES cant:numero)
  comenzar
    mientras(HayPapelEnLaEsquina)
      tomarPapel
      cant:= cant + 1
    mientras (HayFlorEnLaEsquina)
      tomarFlor
      cant:= cant + 1
  fin
areas
  ciudad: AreaPC (25,25,75,75)
  areaJefe: AreaP (1,1,1,1)
  areaR1: AreaP (25,1,25,1)
  areaR2: AreaP (30,1,30,1)
  areaR3: AreaP (35,1,35,1)
  areaR4: AreaP (40,1,40,1)
robots
  robot recolector
  variables
    ID,cant,av,ca:numero
    avAct,idGanador:numero
    sigue:boolean
  comenzar
    cant:=0
    avAct:= PosAv
    RecibirMensaje(ID,r0)
    RecibirMensaje(sigue,r0)
    mientras(sigue)
      Random(av,25,75)
      Random(ca,25,75)
      Pos(av,ca)
      limpiarFloresYPapeles(cant)
      Pos(avAct,1)
      EnviarMensaje(V,r0)
      RecibirMensaje(sigue,r0)
    EnviarMensaje(ID,r0)
    EnviarMensaje(cant,r0)
    RecibirMensaje(idGanador,r0)
    si(idGanador = ID)
      Pos(50,50)
  fin
  robot fiscalizador
  variables
    quien,aux,max,id:numero
    finalizo:boolean
  comenzar
    EnviarMensaje(1,r1)
    EnviarMensaje(2,r2)
    EnviarMensaje(3,r3)
    EnviarMensaje(4,r4)
    max:=-1
    repetir 10
      Random(quien,1,4)
      si(quien = 1)
        EnviarMensaje(V,r1)
      sino
        si(quien = 2)
          EnviarMensaje(V,r2)
        sino
          si(quien = 3)
            EnviarMensaje(V,r3)
          sino
            EnviarMensaje(V,r4)
      RecibirMensaje(finalizo, *)
    EnviarMensaje(F,r1)
    EnviarMensaje(F,r2)
    EnviarMensaje(F,r3)
    EnviarMensaje(F,r4)
    repetir 4
      RecibirMensaje(quien,*)
      si(quien = 1)
        RecibirMensaje(aux, r1)
      sino
        si(quien = 2)
          RecibirMensaje(aux,r2)
        sino
          si(quien = 3)
            RecibirMensaje(aux,r3)
          sino
            RecibirMensaje(aux,r4)
      si(aux > max)
        max:= aux
        id:= quien
    EnviarMensaje(id,r1)
    EnviarMensaje(id,r2)
    EnviarMensaje(id,r3)
    EnviarMensaje(id,r4)         
  fin
variables
  r1,r2,r3,r4: recolector
  r0:fiscalizador
comenzar
  AsignarArea(r1, ciudad)
  AsignarArea(r2, ciudad)
  AsignarArea(r3, ciudad)
  AsignarArea(r4, ciudad)
  AsignarArea(r1, areaR1)
  AsignarArea(r2, areaR2)
  AsignarArea(r3, areaR3)
  AsignarArea(r4, areaR4)
  AsignarArea(r0, areaJefe)
  Iniciar(r0, 1,1)
  Iniciar(r1, 25,1)
  Iniciar(r2, 30,1)
  Iniciar(r3, 35,1)
  Iniciar(r4, 40,1)
fin